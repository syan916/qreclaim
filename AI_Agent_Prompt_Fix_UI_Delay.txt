AI-AGENT PROMPT: Fix UI Delay in browse-found-items.js (Optimistic UI + Local State + Realtime Sync)

You will update the file “browse-found-items.js”, and you MUST fix the UI-delay problem.
The current logic has these issues:

1. Button enable/disable state is updated ONLY AFTER Firestore returns data.
2. Each found item’s action button is controlled by Firestore reads.
3. UI is slow because rendering depends on asynchronous Firestore get() and onSnapshot().

You MUST refactor the file following real-world UI logic: 
UI must update INSTANTLY using local state (Optimistic UI), and Firestore updates must happen in the background.

==================================================
WHAT YOU MUST CHANGE (MANDATORY)
==================================================

1. Create a GLOBAL LOCAL STATE at the top of the file:

let userClaimState = {
    hasActive: false,
    status: "none",          // none | pending | approved | active
    claimItemId: null        // the item the user is claiming/requesting
};

2. REWRITE the button-rendering logic so all buttons depend ONLY on `userClaimState`, NOT directly on Firestore.

Create a new function:

function updateButtonsUI() {
    // loops all item cards and updates their buttons instantly 
    // based only on userClaimState
}

Inside this function, implement these rules:

CASE A — User has no active claim:
  - If item.is_valuable == false → enable "Claim"
  - If item.is_valuable == true → enable "Request Approval"

CASE B — User has pending approval:
  - For requested item → button shows "Pending Approval", disabled
  - For all other items → disable buttons (“Unavailable”)

CASE C — User has approved request:
  - For that item → enable "Claim Now"
  - For all other items → disable buttons

CASE D — User has active claim:
  - Disable all buttons

Buttons must update instantly when this function is called.

3. When the user clicks “Request Approval” or “Claim”, perform an INSTANT LOCAL UI UPDATE using Optimistic UI:

Example:

userClaimState.hasActive = true;
userClaimState.status = "pending";
userClaimState.claimItemId = itemId;
updateButtonsUI(); // instant, no delay

THEN send Firestore write in background (async):

await db.collection("claims").add({...});

DO NOT wait for Firestore to finish BEFORE updating UI.

4. Modify your existing Firestore onSnapshot listener:

It must ONLY update the local state, then call updateButtonsUI().

DO NOT directly enable/disable buttons inside the snapshot callback.

Example:

onSnapshot(claimDocs => {
   if (claimDocs.empty) {
      userClaimState.hasActive = false;
      userClaimState.status = "none";
      userClaimState.claimItemId = null;
   } else {
      let data = claimDocs.docs[0].data();
      userClaimState.hasActive = true;
      userClaimState.status = data.status;
      userClaimState.claimItemId = data.found_item_id;
   }
   updateButtonsUI();
});

5. Remove ANY logic where buttons wait for Firestore reads before updating.

Found items can load normally, but buttons must NOT depend on Firestore read timing.

==================================================
EXPECTED RESULT (MANDATORY)
==================================================

After refactoring:

- Buttons update instantly (0ms delay)
- No flicker or lag when Firestore loads
- Request Approval / Claim operations feel instant
- Firestore only synchronizes backend and corrects UI when it finishes
- Real-world app behavior (Shopee / Grab / Instagram style)

==================================================
FINAL OUTPUT FORMAT
==================================================

Output the following:

1. The updated full code for browse-found-items.js
2. The new local state object
3. The `updateButtonsUI()` function
4. The rewritten click handlers with optimistic UI
5. The updated Firestore listener
6. Notes inside comments explaining why this fixes the delay
