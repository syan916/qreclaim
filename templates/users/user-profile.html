<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile â€¢ QReclaim</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/user-header.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/user-msg-box.css') }}">
  {% include 'partials/user-confirm.html' %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/user-footer.css') }}">
</head>
<body>
  {% include 'partials/user-header.html' %}
  <main class="main-content">
    <section class="page-header py-4">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h1 class="page-title mb-2"><i class="fas fa-user me-2"></i> My Profile</h1>
            <p class="page-subtitle mb-0">Manage your information and avatar</p>
          </div>
          <div class="col-md-4 text-md-end">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="{{ url_for('user.dashboard') }}"><i class="fas fa-home"></i> Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">Profile</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </section>
    <section class="py-3">
      <div class="container">
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card">
          <div class="card-body text-center">
            <img id="profilePreview" class="rounded" alt="Profile" style="width:140px;height:140px;object-fit:cover" src="{{ user.profile_picture_base64 or '' }}" />
            <div class="mt-3">
              <input id="profileInput" type="file" accept="image/*" class="form-control" />
              <small class="text-muted">Max 2MB. Stored as base64.</small>
              <button id="uploadBtn" class="btn btn-primary mt-2"><i class="fas fa-upload"></i> Upload</button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card">
          <div class="card-body">
            <form id="profileForm" class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Name</label>
                <input id="name" class="form-control" value="{{ user.name or '' }}" />
              </div>
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input id="email" class="form-control" value="{{ user.email or '' }}" />
              </div>
              <div class="col-md-6">
                <label class="form-label">Phone</label>
                <input id="phone" class="form-control" value="{{ user.phone or '' }}" />
              </div>
              <div class="col-md-6">
                <label class="form-label">Department</label>
                <input id="department" class="form-control" value="{{ user.department or '' }}" />
              </div>
              <div class="col-12 d-flex justify-content-end">
                <button id="saveProfileBtn" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      {% include 'partials/user-msg-box.html' %}
      </div>
    </section>
  </main>
  {% include 'partials/user-footer.html' %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/user-profile.js') }}"></script>
</body>
</html>